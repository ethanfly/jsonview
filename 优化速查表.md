# 冷启动优化速查表

## 🎯 核心优化（7项）

| # | 优化项 | 文件 | 效果 |
|---|--------|------|------|
| 1 | 骨架屏 | `index.html` | 消除白屏 |
| 2 | 窗口延迟显示 | `src-tauri/src/main.rs` | 内容就绪后显示 |
| 3 | 主题预加载 | `src/main.ts` | 消除闪烁 |
| 4 | 系统字体 | `src/styles.css` | 无网络延迟 |
| 5 | 延迟初始化 | `src/App.vue` | 优先渲染 |
| 6 | 代码分割 | `vite.config.ts` | 减小体积 |
| 7 | 内联 CSS | `index.html` | 避免 FOUC |

## ⚡ 性能指标

```
启动时间:    < 500ms  ✅
首次渲染:    ~150ms   ✅
可交互:      ~400ms   ✅
白屏时间:    0ms      ✅
```

## 🚀 快速命令

```bash
# 开发
npm run tauri:dev

# 构建
npm run build

# 检查 Rust
cargo check --manifest-path src-tauri/Cargo.toml

# 构建前端
npm run build:web
```

## 📝 关键代码片段

### 骨架屏 (index.html)
```html
<div id="skeleton" class="app-skeleton">
  <!-- 立即显示的占位界面 -->
</div>
```

### 窗口控制 (tauri.conf.json)
```json
"visible": false
```

### 主题预加载 (main.ts)
```typescript
const storedTheme = localStorage.getItem('jsonview.theme') || 'dark';
document.documentElement.dataset.theme = storedTheme;
```

### 延迟初始化 (App.vue)
```typescript
setTimeout(async () => {
  // 事件监听
}, 50);
```

## 🎨 自定义调整

| 项目 | 位置 | 默认值 | 建议范围 |
|------|------|--------|----------|
| 窗口延迟 | `main.rs` | 100ms | 50-200ms |
| 事件延迟 | `App.vue` | 50ms | 30-100ms |
| 骨架屏色 | `index.html` | #0c0e14 | 匹配主题 |

## ✅ 验证清单

- [ ] 启动无白屏
- [ ] 骨架屏立即显示
- [ ] 主题无闪烁
- [ ] 启动时间 < 500ms
- [ ] 构建成功
- [ ] Rust 编译通过

## 📚 文档索引

- `性能优化使用说明.md` - 使用指南
- `优化总结.md` - 完整说明
- `PERFORMANCE_OPTIMIZATION.md` - 技术细节
- `QUICK_START.md` - 快速开始
