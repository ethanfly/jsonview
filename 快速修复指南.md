# GitHub Actions å¿«é€Ÿä¿®å¤æŒ‡å—

## ğŸš¨ å½“å‰çŠ¶æ€

æ‰€æœ‰ 4 ä¸ªæ„å»ºä»»åŠ¡å¤±è´¥ï¼š
- âŒ macOS (aarch64-apple-darwin)
- âŒ macOS (x86_64-apple-darwin)
- âŒ Ubuntu 22.04
- âŒ Windows

## ğŸ”§ ç«‹å³å°è¯•çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä½¿ç”¨ç®€åŒ–é…ç½®ï¼ˆæ¨èï¼‰

æˆ‘å·²ç»åˆ›å»ºäº†ä¸¤ä¸ªæ–°çš„ workflow æ–‡ä»¶ï¼š

1. **`.github/workflows/build.yml`** - ç®€åŒ–çš„ä¸»æ„å»ºé…ç½®
2. **`.github/workflows/test-build.yml`** - æµ‹è¯•æ„å»ºé…ç½®

#### æµ‹è¯•æ­¥éª¤ï¼š
```bash
# 1. æäº¤æ–°é…ç½®
git add .github/workflows/
git commit -m "fix: simplify GitHub Actions config"
git push

# 2. æ‰‹åŠ¨è§¦å‘æµ‹è¯•æ„å»º
# è®¿é—® GitHub -> Actions -> "Test Build (Simplified)" -> Run workflow
```

### æ–¹æ¡ˆ 2: æœ¬åœ°éªŒè¯

åœ¨æ¨é€åˆ° GitHub ä¹‹å‰ï¼Œå…ˆæœ¬åœ°éªŒè¯ï¼š

```bash
# 1. æ¸…ç†ç¯å¢ƒ
rm -rf node_modules dist src-tauri/target

# 2. é‡æ–°å®‰è£…
npm ci

# 3. æ„å»ºå‰ç«¯
npm run build:web

# 4. æ£€æŸ¥ Rust
cd src-tauri
cargo check
cargo build --release

# 5. å¦‚æœéƒ½æˆåŠŸï¼Œæ¨é€åˆ° GitHub
cd ..
git add .
git commit -m "fix: verified build locally"
git push
```

### æ–¹æ¡ˆ 3: æ£€æŸ¥å…·ä½“é”™è¯¯

#### æ­¥éª¤ 1: æŸ¥çœ‹é”™è¯¯æ—¥å¿—
1. è®¿é—® GitHub Actions é¡µé¢
2. ç‚¹å‡»å¤±è´¥çš„æ„å»º
3. ç‚¹å‡»ä»»æ„ä¸€ä¸ªå¤±è´¥çš„ jobï¼ˆå¦‚ "build (ubuntu-22.04)"ï¼‰
4. æŸ¥æ‰¾çº¢è‰²çš„é”™è¯¯ä¿¡æ¯

#### æ­¥éª¤ 2: æ ¹æ®é”™è¯¯ç±»å‹ä¿®å¤

**å¦‚æœé”™è¯¯æ˜¯ "npm ci failed"**:
```bash
# ç¡®ä¿ package-lock.json æ˜¯æœ€æ–°çš„
npm install
git add package-lock.json
git commit -m "chore: update package-lock.json"
git push
```

**å¦‚æœé”™è¯¯æ˜¯ "cargo build failed"**:
```bash
# æ£€æŸ¥ Rust ä»£ç 
cd src-tauri
cargo check
# ä¿®å¤ä»»ä½•é”™è¯¯å
git add .
git commit -m "fix: rust compilation errors"
git push
```

**å¦‚æœé”™è¯¯æ˜¯ "vite build failed"**:
```bash
# æ£€æŸ¥å‰ç«¯æ„å»º
npm run build:web
# ä¿®å¤ä»»ä½•é”™è¯¯å
git add .
git commit -m "fix: frontend build errors"
git push
```

## ğŸ“‹ å¿«é€Ÿæ£€æŸ¥æ¸…å•

### æœ¬åœ°éªŒè¯
```bash
# è¿è¡Œè¿™äº›å‘½ä»¤ï¼Œç¡®ä¿éƒ½æˆåŠŸ
npm ci                    # âœ… åº”è¯¥æˆåŠŸ
npm run build:web         # âœ… åº”è¯¥æˆåŠŸ
cargo check --manifest-path src-tauri/Cargo.toml  # âœ… åº”è¯¥æˆåŠŸ
```

### æ–‡ä»¶æ£€æŸ¥
- [ ] `package-lock.json` å­˜åœ¨ä¸”å·²æäº¤
- [ ] `dist/` æ–‡ä»¶å¤¹åœ¨ `.gitignore` ä¸­
- [ ] `src-tauri/target/` åœ¨ `.gitignore` ä¸­
- [ ] æ‰€æœ‰æºä»£ç æ–‡ä»¶å·²æäº¤

## ğŸ¯ æ¨èçš„è°ƒè¯•æµç¨‹

### ç¬¬ 1 æ­¥: ä½¿ç”¨æµ‹è¯•é…ç½®
```bash
# 1. ç¡®ä¿æµ‹è¯•é…ç½®å·²æ¨é€
git add .github/workflows/test-build.yml
git commit -m "add: test build workflow"
git push

# 2. åœ¨ GitHub æ‰‹åŠ¨è§¦å‘ "Test Build (Simplified)"
# è¿™ä¸ªé…ç½®ä¼šæ˜¾ç¤ºæ›´å¤šè°ƒè¯•ä¿¡æ¯
```

### ç¬¬ 2 æ­¥: æŸ¥çœ‹æµ‹è¯•ç»“æœ
- å¦‚æœæµ‹è¯•æ„å»ºæˆåŠŸ âœ… â†’ é—®é¢˜åœ¨ä¸»é…ç½®ä¸­
- å¦‚æœæµ‹è¯•æ„å»ºå¤±è´¥ âŒ â†’ é—®é¢˜åœ¨ä»£ç æˆ–ä¾èµ–ä¸­

### ç¬¬ 3 æ­¥: æ ¹æ®ç»“æœä¿®å¤
**æµ‹è¯•æ„å»ºæˆåŠŸ**:
```bash
# ä½¿ç”¨ç®€åŒ–çš„ä¸»é…ç½®
git add .github/workflows/build.yml
git commit -m "fix: use simplified build config"
git push
```

**æµ‹è¯•æ„å»ºå¤±è´¥**:
```bash
# æŸ¥çœ‹å…·ä½“é”™è¯¯ï¼Œä¿®å¤ä»£ç 
# ç„¶åé‡æ–°æµ‹è¯•
```

## ğŸ” å¸¸è§é—®é¢˜é€ŸæŸ¥

### Q1: æ‰€æœ‰å¹³å°éƒ½å¤±è´¥
**å¯èƒ½åŸå› **: 
- å‰ç«¯æ„å»ºå¤±è´¥
- package.json é…ç½®é”™è¯¯
- ä¾èµ–å®‰è£…å¤±è´¥

**è§£å†³**: æœ¬åœ°è¿è¡Œ `npm run build:web`

### Q2: åªæœ‰ Windows å¤±è´¥
**å¯èƒ½åŸå› **: 
- NSIS ç›¸å…³é—®é¢˜
- Windows ç‰¹å®šçš„è·¯å¾„é—®é¢˜

**è§£å†³**: ç§»é™¤ NSIS è‡ªå®šä¹‰é…ç½®ï¼Œä½¿ç”¨é»˜è®¤

### Q3: åªæœ‰ macOS å¤±è´¥
**å¯èƒ½åŸå› **: 
- ç›®æ ‡æ¶æ„é—®é¢˜
- äº¤å‰ç¼–è¯‘é—®é¢˜

**è§£å†³**: æ£€æŸ¥ rust-toolchain é…ç½®

### Q4: åªæœ‰ Linux å¤±è´¥
**å¯èƒ½åŸå› **: 
- ç³»ç»Ÿä¾èµ–ç¼ºå¤±
- webkit2gtk ç‰ˆæœ¬é—®é¢˜

**è§£å†³**: æ£€æŸ¥ä¾èµ–å®‰è£…æ­¥éª¤

## ğŸ“ éœ€è¦æ›´å¤šå¸®åŠ©ï¼Ÿ

### æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **é”™è¯¯æ—¥å¿—**:
   - è®¿é—®å¤±è´¥çš„ job
   - å¤åˆ¶å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
   - ç‰¹åˆ«æ˜¯çº¢è‰²çš„é”™è¯¯è¡Œ

2. **æœ¬åœ°æ„å»ºç»“æœ**:
   ```bash
   npm run build:web  # ç»“æœï¼Ÿ
   cargo check --manifest-path src-tauri/Cargo.toml  # ç»“æœï¼Ÿ
   ```

3. **ç¯å¢ƒä¿¡æ¯**:
   ```bash
   node --version
   npm --version
   rustc --version
   ```

## âœ… æˆåŠŸæ ‡å¿—

å½“çœ‹åˆ°è¿™äº›ï¼Œè¯´æ˜æ„å»ºæˆåŠŸï¼š
- âœ… æ‰€æœ‰ jobs æ˜¾ç¤ºç»¿è‰²å‹¾å·
- âœ… "Build Tauri app" æ­¥éª¤å®Œæˆ
- âœ… å¯ä»¥ä¸‹è½½ artifacts

## ğŸ‰ ä¸‹ä¸€æ­¥

æ„å»ºæˆåŠŸåï¼š
1. ä¸‹è½½ artifacts æµ‹è¯•
2. éªŒè¯å®‰è£…åŒ…å¯ç”¨
3. å¦‚æœæ»¡æ„ï¼Œåˆ›å»º Release
