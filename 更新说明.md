# 更新说明

## 🎯 本次更新内容

### 1. 界面优化 ✅
- ✅ 删除顶部"打开"按钮（通过菜单 File -> Open 或 Ctrl+O 打开文件）
- ✅ 删除顶部"诊断"按钮（简化界面）
- ✅ 工具栏更加简洁，只保留核心功能

### 2. GitHub Actions 修复 ✅
- ✅ 添加 Windows NSIS 安装步骤
- ✅ 添加 tag 触发构建
- ✅ 优化构建流程
- ✅ 确保所有平台构建成功

## 📋 工具栏功能说明

### 保留的按钮
- **保存** - 保存当前 JSON 文件（Ctrl+S）
- **格式化** - 按当前缩进格式化 JSON
- **压缩** - 压缩为单行 JSON
- **缩进选择** - 2空格 / 4空格 / Tab
- **主题切换** - 深色 / 浅色 / 蔚蓝
- **搜索** - 搜索 JSON 内容

### 删除的按钮
- ~~打开~~ - 使用菜单 File -> Open (Ctrl+O) 代替
- ~~诊断~~ - 开发调试功能，已移除

## 🎨 打开文件的方式

### 方式 1: 菜单栏
```
File -> Open (Ctrl+O)
```

### 方式 2: 文件关联
双击 .json 文件直接打开

### 方式 3: 拖放
将 JSON 文件拖放到应用窗口（如果支持）

## 🚀 GitHub Actions 构建

### 触发方式
1. **手动触发**: GitHub Actions 页面点击 "Run workflow"
2. **推送触发**: 推送到 main 或 release 分支
3. **标签触发**: 创建 v* 标签（如 v1.0.0）

### 构建平台
- ✅ Windows (x64) - 生成 .exe 和 .msi 安装包
- ✅ macOS (Apple Silicon) - 生成 .dmg
- ✅ macOS (Intel) - 生成 .dmg
- ✅ Linux (Ubuntu 22.04) - 生成 .deb, .rpm, .AppImage

### NSIS 安装
Windows 构建会自动安装 NSIS，支持：
- 中文安装界面
- 文件关联 (.json)
- 开始菜单快捷方式
- 卸载程序

## 📦 构建产物

### Windows
- `JSON Viewer_x.x.x_x64-setup.exe` - NSIS 安装包
- `JSON Viewer_x.x.x_x64_en-US.msi` - MSI 安装包

### macOS
- `JSON Viewer_x.x.x_aarch64.dmg` - Apple Silicon
- `JSON Viewer_x.x.x_x64.dmg` - Intel

### Linux
- `json-viewer_x.x.x_amd64.deb` - Debian/Ubuntu
- `json-viewer-x.x.x-1.x86_64.rpm` - RedHat/Fedora
- `json-viewer_x.x.x_amd64.AppImage` - 通用格式

## 🔧 本地构建测试

### 开发模式
```bash
npm run tauri:dev
```

### 生产构建
```bash
npm run build
```

### 验证 NSIS
```bash
# Windows PowerShell
npm run ensure-nsis
```

## ✅ 验证清单

- [x] 工具栏"打开"按钮已删除
- [x] 工具栏"诊断"按钮已删除
- [x] 菜单 File -> Open 功能正常
- [x] Ctrl+O 快捷键正常
- [x] 前端构建成功
- [x] GitHub Actions 配置正确
- [x] NSIS 安装步骤已添加

## 📝 注意事项

1. **打开文件**: 现在只能通过菜单或快捷键打开，界面更简洁
2. **诊断功能**: 如需调试，可以在开发模式下使用浏览器控制台
3. **GitHub Actions**: 首次运行可能需要较长时间，后续会有缓存加速

## 🎉 更新完成

界面更加简洁，GitHub Actions 构建流程更加完善！
